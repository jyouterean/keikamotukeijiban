# 軽貨物掲示板

軽貨物の案件情報を共有する掲示板サイトです。

## 機能

### 1. ニックネーム設定
- サイトを開いた時に、最初にニックネーム設定画面が表示されます
- ニックネームのみを入力して利用を開始できます
- ニックネームはローカルストレージに保存されます

### 2. チャット機能（3つのタブ）
- **案件**: 案件情報を投稿・閲覧できます
- **雑談**: 自由にメッセージを投稿できます
- **詐欺**: 詐欺に関する情報を共有できます

### 3. レスポンシブデザイン（スマホ/PC対応）

#### PC版
- 左側にメッセージ一覧、右側に投稿フォームを表示
- 案件にスレッドボタンが表示され、クリックでスレッドモーダルが開きます

#### スマホ版
- メッセージ一覧が全画面表示
- 右下にフローティングボタン（+）が表示
- ボタンを押すと全画面モーダルで投稿フォームが開きます
- スレッドモーダルも最適化されたレイアウトで表示

### 4. スレッド機能（案件のみ）
- 各案件に「スレッドを見る」ボタンが表示されます
- スレッドを開くと：
  - 案件の詳細情報（電話番号を含む）が表示されます
  - コメントの閲覧・投稿ができます
  - リアルタイムでコメント数が更新されます
- **電話番号はスレッド内でのみ表示**（一覧では非表示）

### 5. タブ別の投稿仕様

#### 案件チャット
以下の項目を入力して投稿します：
- 案件名（必須）
- 電話番号（必須）- スレッド内でのみ表示
- 料金（必須）
- 概要（必須）
- ニックネーム（自動入力）

#### 雑談・詐欺チャット
- 自由にメッセージを投稿できます
- **連投制限**: 30秒間に5件以上投稿すると、60秒間投稿できなくなります

### 6. データ保存
- すべてのメッセージはブラウザのローカルストレージに保存されます
- スレッドコメントもローカルストレージに保存されます
- ニックネームもローカルストレージに保存されます
- ログアウトするとニックネームがクリアされます

## 開発環境

### 必要なもの
- Node.js 20以上
- npm

### セットアップ

1. 依存関係をインストール:
```bash
npm install
```

2. 開発サーバーを起動:
```bash
npm run dev
```

3. ブラウザで開く:
```
http://localhost:3000
```

### ビルド

本番環境用にビルド:
```bash
npm run build
```

本番サーバーを起動:
```bash
npm start
```

## 技術スタック

- **Next.js 16** - Reactフレームワーク
- **React 19** - UIライブラリ
- **TypeScript** - 型安全性
- **Tailwind CSS 4** - スタイリング
- **localStorage** - データ永続化

## プロジェクト構造

```
keijiban-board/
├── app/
│   ├── components/              # Reactコンポーネント
│   │   ├── ChatBoard.tsx        # メインチャット画面
│   │   ├── MessageList.tsx      # メッセージ一覧表示
│   │   ├── NicknameSetup.tsx    # ニックネーム設定
│   │   ├── ProjectForm.tsx      # 案件投稿フォーム
│   │   ├── SimpleForm.tsx       # 雑談・詐欺投稿フォーム
│   │   ├── ThreadModal.tsx      # スレッドモーダル
│   │   └── MobileFormModal.tsx  # スマホ用フォームモーダル
│   ├── hooks/                   # カスタムフック
│   │   └── useMediaQuery.ts     # レスポンシブ判定フック
│   ├── types.ts                 # TypeScript型定義
│   ├── globals.css              # グローバルスタイル
│   ├── layout.tsx               # ルートレイアウト
│   └── page.tsx                 # メインページ
├── public/                      # 静的ファイル
├── package.json                 # プロジェクト設定
└── tsconfig.json               # TypeScript設定
```

## 主な機能の実装

### スレッド機能
- 案件ごとにスレッドコメントを投稿・閲覧
- スレッドモーダルで電話番号を含む詳細情報を表示
- コメント数をリアルタイム表示
- すべてのスレッドデータをローカルストレージで管理

### レスポンシブデザイン
- `useMediaQuery` カスタムフックで画面サイズを判定
- 768px以下でスマホUIに自動切り替え
- PC版: 2カラムレイアウト（メッセージ + フォーム）
- スマホ版: 1カラムレイアウト + フローティングボタン

### 連投制限
- ユーザーごと、タブごとに連投回数を追跡
- 30秒間に5件以上投稿すると60秒間ブロック
- ブロック状態はローカルストレージで管理
- リアルタイムでカウントダウン表示

### メッセージ管理
- すべてのメッセージをローカルストレージに保存
- タブごとにメッセージをフィルタリング
- 新しいメッセージが投稿されると自動スクロール

### モーダル管理
- 外側クリックで自動クローズ
- スマホでは全画面表示
- スクロールロック機能

## 注意事項

- データはブラウザのローカルストレージに保存されるため、ブラウザを変更したりキャッシュをクリアすると消えます
- サーバー側のデータベースは使用していません（将来的に追加可能）
- 連投制限はクライアント側で実装されています
