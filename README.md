# 軽貨物掲示板

軽貨物の案件情報を共有する掲示板サイトです。

## 機能

### 1. ニックネーム設定
- サイトを開いた時に、最初にニックネーム設定画面が表示されます
- ニックネームのみを入力して利用を開始できます
- ニックネームはローカルストレージに保存されます

### 2. チャット機能（2つのタブ）
- **案件**: 案件情報を投稿・閲覧できます
- **雑談**: 自由にメッセージを投稿できます

### 3. レスポンシブデザイン（スマホ/PC対応）

#### PC版
- 左側にメッセージ一覧、右側に投稿フォームを表示
- 案件にスレッドボタンが表示され、クリックでスレッドモーダルが開きます

#### スマホ版
- メッセージ一覧が全画面表示
- 右下にフローティングボタン（+）が表示
- ボタンを押すと全画面モーダルで投稿フォームが開きます
- スレッドモーダルも最適化されたレイアウトで表示

### 4. スレッド機能（案件のみ）
- 各案件に「スレッドを見る」ボタンが表示されます
- スレッドを開くと：
  - 案件の詳細情報（電話番号を含む）が表示されます
  - コメントの閲覧・投稿ができます
  - リアルタイムでコメント数が更新されます
- **電話番号はスレッド内でのみ表示**（一覧では非表示）

### 5. タブ別の投稿仕様

#### 案件チャット
以下の項目を入力して投稿します：
- 案件名（必須）
- 電話番号（必須）- スレッド内でのみ表示
- 料金（必須）
- 概要（必須）
- ニックネーム（自動入力）

#### 雑談チャット
- 自由にメッセージを投稿できます
- **連投制限**: 30秒間に5件以上投稿すると、60秒間投稿できなくなります

### 6. データ保存
- すべてのメッセージはブラウザのローカルストレージに保存されます
- スレッドコメントもローカルストレージに保存されます
- ニックネームもローカルストレージに保存されます
- ログアウトするとニックネームがクリアされます

## 開発環境

### 必要なもの
- Node.js 20以上
- npm

### セットアップ

1. 依存関係をインストール:
```bash
npm install
```

2. 開発サーバーを起動:
```bash
npm run dev
```

3. ブラウザで開く:
```
http://localhost:3000
```

### ビルド

本番環境用にビルド:
```bash
npm run build
```

本番サーバーを起動:
```bash
npm start
```

## 技術スタック

- **Next.js 16** - Reactフレームワーク
- **React 19** - UIライブラリ
- **TypeScript** - 型安全性
- **Tailwind CSS 4** - スタイリング
- **localStorage** - データ永続化

## SEO最適化

### メタデータ
- **title**: 軽貨物掲示板｜全国の案件・求人情報が集まる無料掲示板
- **description**: 軽貨物ドライバーと荷主・元請けをつなぐ無料掲示板の説明
- **keywords**: 軽貨物、掲示板、案件、求人、ドライバー、配送、運送など
- **Open Graph**: Facebook/SNSシェア対応
- **Twitter Card**: Twitterシェア対応（summary_large_image）
- **canonical**: 正規URL設定

### 構造化データ（JSON-LD）
- **WebSite**: サイト情報と検索アクション
- **Organization**: 組織情報
- **DiscussionForumPosting**: 掲示板情報
- **BreadcrumbList**: パンくずリスト

### クローラー対応
- **robots.txt**: 全ページクロール許可
- **sitemap.xml**: 自動生成サイトマップ
- **meta robots**: Googlebot向け最適化設定

### アクセシビリティ
- **aria-label**: すべてのボタンとSVGアイコンにラベル追加
- **role属性**: main, banner, tablist, tab, form
- **aria-selected**: タブの選択状態
- **aria-hidden**: 装飾的なSVGに設定

## プロジェクト構造

```
keijiban-board/
├── app/
│   ├── components/              # Reactコンポーネント
│   │   ├── ChatBoard.tsx        # メインチャット画面
│   │   ├── MessageList.tsx      # メッセージ一覧表示
│   │   ├── NicknameSetup.tsx    # ニックネーム設定
│   │   ├── ProjectForm.tsx      # 案件投稿フォーム
│   │   ├── SimpleForm.tsx       # 雑談投稿フォーム
│   │   ├── MobileSimpleForm.tsx # スマホ用LINE風フォーム
│   │   ├── ThreadModal.tsx      # スレッドモーダル
│   │   ├── MobileFormModal.tsx  # スマホ用フォームモーダル
│   │   ├── AccountForm.tsx      # アカウント作成フォーム
│   │   ├── AccountModal.tsx     # アカウント情報表示
│   │   └── JsonLd.tsx           # SEO: 構造化データ
│   ├── hooks/                   # カスタムフック
│   │   └── useMediaQuery.ts     # レスポンシブ判定フック
│   ├── utils/                   # ユーティリティ
│   │   └── accountStorage.ts    # アカウントストレージ管理
│   ├── types.ts                 # TypeScript型定義
│   ├── globals.css              # グローバルスタイル
│   ├── layout.tsx               # ルートレイアウト（SEO最適化済み）
│   ├── page.tsx                 # メインページ
│   └── sitemap.ts               # SEO: サイトマップ自動生成
├── public/
│   └── robots.txt               # SEO: クローラー設定
├── package.json                 # プロジェクト設定
└── tsconfig.json               # TypeScript設定
```

## 主な機能の実装

### スレッド機能
- 案件ごとにスレッドコメントを投稿・閲覧
- スレッドモーダルで電話番号を含む詳細情報を表示
- コメント数をリアルタイム表示
- すべてのスレッドデータをローカルストレージで管理

### レスポンシブデザイン
- `useMediaQuery` カスタムフックで画面サイズを判定
- 768px以下でスマホUIに自動切り替え
- PC版: 2カラムレイアウト（メッセージ + フォーム）
- スマホ版: 1カラムレイアウト + フローティングボタン

### 連投制限
- ユーザーごと、タブごとに連投回数を追跡
- 30秒間に5件以上投稿すると60秒間ブロック
- ブロック状態はローカルストレージで管理
- リアルタイムでカウントダウン表示

### メッセージ管理
- すべてのメッセージをローカルストレージに保存
- タブごとにメッセージをフィルタリング
- 新しいメッセージが投稿されると自動スクロール

### モーダル管理
- 外側クリックで自動クローズ
- スマホでは全画面表示
- スクロールロック機能

## 注意事項

- データはブラウザのローカルストレージに保存されるため、ブラウザを変更したりキャッシュをクリアすると消えます
- サーバー側のデータベースは使用していません（将来的に追加可能）
- 連投制限はクライアント側で実装されています
